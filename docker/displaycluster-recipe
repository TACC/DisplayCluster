mkdir -p /usr/local/src
cd /usr/local/src

git clone https://github.com/TACC/DisplayCluster.git
cd DisplayCluster
git checkout docker

cd /usr/local/src/DisplayCluster/dependencies
tar xzf sip-4.19.25.tar.gz
cd sip-4.19.25
python configure.py
make 
make install

cd /usr/local/src/DisplayCluster/dependencies
tar xzf PyQt4_gpl_x11-4.12.3.tar.gz
cd PyQt4_gpl_x11-4.12.3
python configure.py --confirm-license
make -j 4 
make install

cd /usr/local/src/DisplayCluster/dependencies
unzip PythonQt2.0.1.DC.zip 
cd PythonQt2.0.1
sed -i -e "s/python2.6/python2.7/" -e "s/python26/python27/" build/python.prf
sed -i -e "s?ast.h?parser/ast.h?" generator/abstractmetabuilder.cpp
qmake QMAKE_CXXFLAGS=-I/usr/include/python2.7
make -j 4

cd /usr/local/src/DisplayCluster/dependencies
tar xzf boost_1_53_0.tar.gz
cd boost_1_53_0
./bootstrap.sh
./b2 -j 4 install

cd /usr/local/src/DisplayCluster/dependencies
tar xzf ffmpeg-1.1.2.tar.gz
cd ffmpeg-1.1.2
./configure --prefix=/usr/local --disable-doc
make -j 4 install

cd /usr/local/src/DisplayCluster
mkdir build
cd build
cmake ../ \
	-DBUILD_DESKTOPSTREAMER=ON \
	-DBUILD_DISPLAYCLUSTER=ON \
	-DENABLE_PYTHON_SUPPORT=ON \
	-DPythonQt_INCLUDE_DIR=/usr/local/src/DisplayCluster/dependencies/PythonQt2.0.1/src \
	-DPythonQt_LIBRARY=/usr/local/src/DisplayCluster/dependencies/PythonQt2.0.1/lib/libPythonQt.so \
	-DPYTHON_INCLUDE_DIR=/usr/include/python2.7 \
	-DPYTHON_LIBRARY=/usr/lib/x86_64-linux-gnu/libpython2.7.so
# make -j 4 install

